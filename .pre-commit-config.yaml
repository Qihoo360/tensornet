exclude: ^.pixi/envs/

repos:
  - repo: local
    hooks:
      - id: end-of-file
        name: Check end-of-file
        entry: ./pixiw run -e tools end-of-file-fixer
        language: system
        types: [text]
        stages: [pre-commit, manual]
      - id: trailing-whitespace
        name: Fix trailing whitespace
        entry: ./pixiw run -e tools trailing-whitespace-fixer
        language: system
        types: [text]
        stages: [pre-commit, manual]
        exclude: "\\.patch$"

      - id: check-yaml
        name: Check YAML
        entry: ./pixiw run -e tools check-yaml
        language: system
        types: [yaml]
        stages: [pre-commit, manual]
      - id: toml-format
        name: TOML format
        entry: ./pixiw run toml-format
        language: system
        types: [file, toml]
        stages: [pre-commit, manual]
      - id: check-json
        name: Validate json files
        entry: ./pixiw run -e tools check-json
        language: system
        types: [json]
        stages: [pre-commit, manual]
      - id: format-json
        name: Format json files
        entry: ./pixiw run -e tools pretty-format-json --autofix
        language: system
        types: [json]
        stages: [pre-commit, manual]
        exclude: "^doc/"
      - id: shellcheck
        name: Check shell scripts
        entry: ./pixiw run -e tools shellcheck
        language: system
        types: [shell]
        stages: [pre-commit, manual]
        exclude: "manager|tools/package.sh|tensornet-tools/bin/tn_tools.sh|configure.sh"
      - id: cmake-format
        name: Format cmake list files
        entry: ./pixiw run -e tools cmake-format --in-place
        language: system
        types: [cmake]
        stages: [pre-commit, manual]
      - id: cmake-lint
        name: Lint cmake list files
        entry: ./pixiw run -e tools cmake-lint
        language: system
        types: [cmake]
        stages: [pre-commit, manual]

      - id: actionlint
        name: Lint GitHub Actions workflow files
        language: system
        entry: ./pixiw run -e tools actionlint
        types: [yaml]
        files: ^\.github/workflows/
        stages: [pre-commit, manual]
